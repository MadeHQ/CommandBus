(function(){define("extend",[],function(){return function(t){t=t||{};for(var n=1;n<arguments.length;n++){if(!arguments[n])continue;if(arguments[n].constructor===Array){var r=[];for(var i=0;i<arguments[n].length;i++){var s=arguments[n][i];for(var o in s)for(var u in t)s[o].hasOwnProperty(u)||(s[o][u]=t[u]);r.push(s)}return r}for(var a in arguments[n])arguments[n].hasOwnProperty(a)&&(t[a]=arguments[n][a])}return t}})})(),function(){define("command-bus",["extend"],function(e){var t;return t=function(){function t(){this.options=null}return t.prototype.setOptions=function(t){this.options===null&&(this.options={}),this.options=e(this.options,t)},t.prototype.setHandlers=function(e){this.setOptions({handlers:e})},t.prototype.setGlobalDependencies=function(e){this.setOptions({globalDependencies:e})},t.prototype.getOption=function(e){if(this.options.hasOwnProperty(e))return this.options[e];throw new ReferenceError("Options "+e+" does not exist")},t.prototype.handle=function(t,n){var r={},i={};t.constructor===Object&&(t=t.name,r=t.arguments||{});if(this.getOption("handlers").hasOwnProperty(t)){var s=this.getOption("handlers")[t];try{i=e(this.getOption("globalDependencies"),s.dependencies)}catch(o){i=s.dependencies}return s.handler.constructor===Function?s.handler.apply(this,[i,r,n]):require([s.handler],function(e){return e.apply(this,[i,r,n])})}},t}(),t})}();